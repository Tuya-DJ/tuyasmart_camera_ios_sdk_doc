
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>QRCode Network Configuration Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="version_record.html" />
    
    
    <link rel="prev" href="required_permission.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="rapid_integration.html">
            
                <a href="rapid_integration.html">
            
                    
                    Rapid Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="manual_integration.html">
            
                <a href="manual_integration.html">
            
                    
                    Manual Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="preparation_work.html">
            
                <a href="preparation_work.html">
            
                    
                    Preparation Work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="initiate_sdk.html">
            
                <a href="initiate_sdk.html">
            
                    
                    Initiate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="camera_function.html">
            
                <a href="camera_function.html">
            
                    
                    Camera Function
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="device_dp.html">
            
                <a href="device_dp.html">
            
                    
                    Functions Of Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="required_permission.html">
            
                <a href="required_permission.html">
            
                    
                    Required Permission
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9" data-path="qrcode_network_configuration.html">
            
                <a href="qrcode_network_configuration.html">
            
                    
                    QRCode Network Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="version_record.html">
            
                <a href="version_record.html">
            
                    
                    Change Log
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >QRCode Network Configuration</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="qrcode-network-configuration">QRCode Network Configuration</h1>
<p>Make sure you has access to TuyaSmartHomeKit (Click <a href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_doc/en/" target="_blank">HERE</a> to view the document).</p>
<h2 id="get-current-wifi-ssid">Get Current WiFi SSID</h2>
<pre><code class="lang-objective-c">self.ssid = [TuyaSmartActivator currentWifiSSID];
</code></pre>
<h2 id="get-token">Get Token</h2>
<pre><code class="lang-objective-c">long long homeId = &apos;current home id&apos;;
[[TuyaSmartActivator sharedInstance] getTokenWithHomeId:homeId success:^(NSString *result) {
self.token = result;
} failure:^(NSError *error) {
}];
</code></pre>
<h2 id="build-qr-code-information">Build QR Code Information</h2>
<pre><code class="lang-objective-c">// self.ssid
// self.token
// self.pwd        // current wifi password
NSDictionary *dictionary = @{
@&quot;s&quot;: self.ssid,
@&quot;p&quot;: self.pwd,
@&quot;t&quot;: self.token
};
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionary options:0 error:nil];
self.wifiJsonStr = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
</code></pre>
<h2 id="begin-network-distribute">Begin Network Distribute</h2>
<p>Use the wifijsonstr to get qr code, make sure that the device is at network distribute status, put the qr code in front of cameram, device will have the indicate voice once it get the qr code information. mornitor the network distribute result with below interface:</p>
<pre><code class="lang-objective-c">[[TuyaSmartActivator sharedInstance] startConfigWiFi:TYActivatorModeQRCode ssid:self.ssid password:self.pwd token:self.token timeout:100];
</code></pre>
<h2 id="stop-network-distribute">Stop Network Distribute</h2>
<pre><code class="lang-objective-c">[[TuyaSmartActivator sharedInstance] stopConfigWiFi];
</code></pre>
<h2 id="call-back-the-result">Call Back The Result</h2>
<p>Call back the result with the delegate: TuyaSmartActivatorDelegate, the delegate method :</p>
<pre><code>// deviceModel the model class of device
- (void)activator:(TuyaSmartActivator *)activator didReceiveDevice:(TuyaSmartDeviceModel *)deviceModel error:(NSError *)error;
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="required_permission.html" class="navigation navigation-prev " aria-label="Previous page: Required Permission">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="version_record.html" class="navigation navigation-next " aria-label="Next page: Change Log">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"QRCode Network Configuration","level":"1.9","depth":1,"next":{"title":"Change Log","level":"1.10","depth":1,"path":"resource/version_record.md","ref":"resource/version_record.md","articles":[]},"previous":{"title":"Required Permission","level":"1.8","depth":1,"path":"resource/required_permission.md","ref":"resource/required_permission.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"resource/qrcode_network_configuration.md","mtime":"2019-01-24T09:55:31.667Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-01-24T09:56:20.540Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

